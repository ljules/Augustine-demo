<!-- 
_______________________________________________________________________________

                                    TEAMS
_______________________________________________________________________________

Description :
-------------
Cette page du template reçoit exploite le contenu du plugin trombi pour produire
l'affichage d'une page avec les équipes en exploitant le dictionnaire dico_team.
-->

{% extends "base.html" %}


 <!-- Icone de l'onglet de navigation : -->
 {% block faviBloc %} 
 <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png">
{% endblock %}

<!-- CONTENU SOUS-EN-TETE : -->
{% block contenu_sous_tete %}
    <div class="text-light py-1 small">
        <span><i class="bi bi-people-fill me-2 text-warning"></i><b class="text-warning"></b></span>
        {{ page.title }}
    </div>  
{% endblock %}


{% block content %}
    <div class="row" style="width: 98%">

        <!-- Titre : -->
        <div class="d-flex m-0 mb-3">
            <div class="m-0 py-1 px-3 d-flex align-items-center bg-warning text-center fs-3 rounded-start-3 shadow">
                <i class="bi bi-people-fill text-dark"></i>
            </div>
            <div class="m-0 bg-secondary shadow" style="width: 5px;"></div>
            <div class="flex-grow-1 p-1 ps-3 pe-4 rounded-end-3 text-warning fs-5 d-flex align-items-center shadow section-titre">
                <b class="me-2 text-light">Equipes sur les différentes sessions</b>
            </div>
        </div>


        <!-- Choix de l'année de la session de l'Eco-Marathon : -->
        <div class="col d-inline-flex align-items-baseline m-0 p-3 ms-3 rounded-3 small text-warning" style="background-color:rgb(50, 50, 50);">
            Veuillez choisir l'année de la session de course pour afficher l'équipe correspondante :  
            <select class="form-select ms-2" style="width:150px" id="year-select">
                </option><option value="default" selected><i>Session</i></option>

                {% for annee in DICO_TROMBI %}
                    <option value="team-{{ annee }}">{{ annee }}</option>
                {% endfor %}
            </select>
        </div>

    </div>
    

    {% for annee in DICO_TROMBI %}

        <div class="container mx-1 my-4 p-0 border border-1 border-black text-black" id="team-{{ annee }}" style="width: 98%">
            <div class="row m-0">
                <h2 class="col m-0 p-1 bg-warning border border-1 border-black fw-bold">
                    Equipe de la session {{ annee }}
                </h2>
            </div>

            <!-- Photo de groupe : -->
            <div class="row m-0">
                <div class="col bg-white border border-1 border-black text-center">
                    <img src="{{ SITEURL }}/trombi/team_{{ annee }}.jpg"
                    alt="Photo de {{ annee }}"
                    class="mt-1 rounded-0"
                    style="max-width: 90%;">

                    <p class="fw-bold mt-2 mb-1 text-secondary">La photo de groupe {{ annee}}</p>
                </div>


            </div>

            <!-- Affichage des encadarants : -->
            <div class="row m-0">    
                <h3 class="col m-0 p-1 bg-dark-subtle border border-1 border-black text-center fw-bold">
                    Les encadrants
                </h3>
            </div>

            
            <div class="row m-0">
                {% for trombi in DICO_TROMBI[annee] %}
                    
                    {% if trombi.fonction == "encadrant" %}
                        <div class="col py-2 bg-white border border-1 border-black text-center">                            
                            <img src="{{ SITEURL }}/trombi/{{ trombi.photo }}"
                                 alt="Photo de {{ trombi.prenom }} {{ trombi.nom }}"
                                 class="mt-1 rounded-2"
                                 style="height:110px;">
                            <p class="fw-bold mt-2 mb-1 text-secondary">{{trombi.prenom}} {{ trombi.nom }}</p>
                        </div>
                    {% endif %}
                                    
                {% endfor %}
            </div>
            
            <!-- Affichage des pilotes : -->
            <div class="row m-0">    
                <h3 class="col m-0 p-1 bg-white bg-dark-subtle border border-1 border-black text-center fw-bold">
                    Les pilotes
                </h3>
            </div>

            <div class="row m-0">
                {% for trombi in DICO_TROMBI[annee] %}
                    
                    {% if trombi.role == "pilote" %}
                        <div class="col py-2 bg-white border border-1 border-black text-center">                            
                            <img src="{{ SITEURL }}/trombi/{{ trombi.photo }}"
                                    alt="Photo de {{ trombi.prenom }} {{ trombi.nom }}"
                                    class="mt-1 rounded-2"
                                    style="height:110px;">
                            <p class="fw-bold mt-2 mb-1 text-secondary">{{trombi.prenom}} {{ trombi.nom }}</p>
                        </div>
                    {% endif %}
                                    
                {% endfor %}
            </div>


            <!-- Affichage du manager : -->
            <div class="row m-0">    
                <h3 class="col m-0 p-1 bg-white bg-dark-subtle border border-1 border-black text-center fw-bold">
                    Le team manager
                </h3>
            </div>

            <div class="row m-0">
                {% for trombi in DICO_TROMBI[annee] %}
                    
                    {% if trombi.role == "manager" %}
                        <div class="col py-2 bg-white border border-1 border-black text-center">                            
                            <img src="{{ SITEURL }}/trombi/{{ trombi.photo }}"
                                    alt="Photo de {{ trombi.prenom }} {{ trombi.nom }}"
                                    class="mt-1 rounded-2"
                                    style="height:110px;">
                            <p class="fw-bold mt-2 mb-1 text-secondary">{{trombi.prenom}} {{ trombi.nom }}</p>
                        </div>
                    {% endif %}
                                    
                {% endfor %}
            </div>


            <!-- Affichage des équipiers : -->
            <div class="row m-0">    
                <h3 class="col m-0 p-1 bg-white bg-dark-subtle border border-1 border-black text-center fw-bold">
                    Les équipiers
                </h3>
            </div>

            <div class="row m-0">
                {% for trombi in DICO_TROMBI[annee] %}
                    
                    {% if trombi.role == "équipier" %}
                        <div class="col py-2 bg-white border border-1 border-black text-center">                            
                            <img src="{{ SITEURL }}/trombi/{{ trombi.photo }}"
                                    alt="Photo de {{ trombi.prenom }} {{ trombi.nom }}"
                                    class="mt-1 rounded-2"
                                    style="height:110px;">
                            <p class="fw-bold mt-2 mb-1 text-secondary">{{trombi.prenom}} {{ trombi.nom }}</p>
                        </div>
                    {% endif %}
                                    
                {% endfor %}
            </div>

        </div>

    {% endfor %}

    <!-- Code JavaScript de filtrage de la session à partir du choix du menu déroulant : -->
    <script>

        // Exécution du script après chargement de tous les éléments du DOM :
        document.addEventListener('DOMContentLoaded', function () {
            var select = document.getElementById('year-select');
            
            function filterTeams() {
                var selectedYear = select.value; // Récupère l'année sélectionnée
    
                // Cache toutes les équipes
                document.querySelectorAll('[id^="team-"]').forEach(function(team) {
                    team.style.display = 'none';
                });
    
                // Affiche l'équipe de l'année sélectionnée
                if (selectedYear !== "default" && selectedYear !== "") {
                    var team = document.getElementById(selectedYear);
                    if (team) {
                        team.style.display = 'block';
                    }
                }
            }
    
            // Appel initial pour cacher les équipes
            filterTeams();
    
            // Ajoute un écouteur d'événement
            select.addEventListener('change', filterTeams);
        });
      
        
    </script>

{% endblock %}



<!-- NAVBAR DE PIED : -->
{% block bottom_nav_bar %}

    <nav class="container text-center p-0">
        <div class="row">
            <a class="col-6 btn btn-dark text-warning fs-3"
            title="Retour à l'accueil"
            href="{{ SITEURL }}">
                <i class="bi bi-house-up"></i>
            </a>
            <a class="col-6 btn btn-dark text-warning fs-3"
            title="Retour haut de page"
            href="#">
                <i class="bi bi-chevron-bar-up"></i>
            </a>
        </div>

    </nav>

{% endblock %}