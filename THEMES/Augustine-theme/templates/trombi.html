<!-- 
_______________________________________________________________________________

                                    TROMBI
_______________________________________________________________________________

Description :
-------------
Cette page du template reçoit exploite le contenu du plugin trombi pour produire
l'affichage d'une page avec les trombis.
-->

{% extends "base.html" %}

 <!-- Icone de l'onglet de navigation : -->
 {% block faviBloc %} 
 <link rel="icon" type="image/png" sizes="16x16" href="../images/favicon-16x16.png">
{% endblock %}

<!-- CONTENU SOUS-EN-TETE : -->
{% block contenu_sous_tete %}
    <div class="text-light py-1 small">
        <span><i class="bi bi-person-badge-fill me-2 text-warning"></i><b class="text-warning"></b></span>
        {{ page.title }}
    </div>    
{% endblock %}

{% block content %}


    <!-- Titre : -->
    <div class="d-flex m-0 mb-3">
        <div class="m-0 py-1 px-3 d-flex align-items-center bg-warning text-center fs-3 rounded-start-3 shadow">
            <i class="bi bi-person-badge-fill text-dark"></i>
        </div>
        <div class="m-0 bg-secondary shadow" style="width: 5px;"></div>
        <div class="flex-grow-1 p-1 ps-3 pe-4 rounded-end-3 text-warning fs-5 align-items-center shadow section-titre">
            <div>
                <b class="me-2 text-light">Trombinoscope :</b>
            </div>
            <div>
                Tous les membres depuis 2015
            </div>
             
        </div>
    </div>


    <!-- CONTROLE DES FILTRES : -->
    <div class="mx-3 my-4 p-0 rounded-3 shadow text-light" style="background-color:rgb(50, 50, 50)">
        
        <h2 class="bg-warning m-0 rounded-top-3 p-2 fw-bold text-dark">Filtres d'affichage</h2>

        <div class="m-3 pb-3">
            
            <div class="small">
                <h5><u>Filtre par fonction :</u></h5>

                <!-- Switch afficher/masquer étudiants : -->
                <div class="form-check form-switch ms-2">
                    <input class="form-check-input" type="checkbox" role="switch" id="toggleStudent" checked>
                    <label class="form-check-label" for="toggleStudent">Etudiants</label>
                </div>


                <!-- Switch afficher/masquer encadrants : -->
                <div class="form-check form-switch ms-2">
                    <input class="form-check-input" type="checkbox" role="switch" id="toggleTeacher" checked>
                    <label class="form-check-label" for="toggleTeacher">Encadrants</label>
                </div>
            </div>

            
            <div class="mt-4 small">
                <h5><u>Filtre par rôle des étudiants :</u></h5>

                <!-- Switch afficher/masquer pilotes : -->
                <div class="form-check form-switch ms-2">
                    <input class="form-check-input" type="checkbox" role="switch" id="toggleDriver" checked>
                    <label class="form-check-label" for="toggleDriver">Pilotes</label>
                </div>

                <!-- Switch afficher/masquer managers : -->
                <div class="form-check form-switch ms-2">
                    <input class="form-check-input" type="checkbox" role="switch" id="toggleManager" checked>
                    <label class="form-check-label" for="toggleManager">Team Managers</label>
                </div>

                <!-- Switch afficher/masquer équipiers : -->
                <div class="form-check form-switch ms-2">
                    <input class="form-check-input" type="checkbox" role="switch" id="toggleMember" checked>
                    <label class="form-check-label" for="toggleMember">Equipiers</label>
                </div>
            </div>

        </div>
        
    </div>



    <!-- AFFICHAGE DES VIGNETTES : -->
    <div class="row mx-1">
        {% for trombi in TROMBI_COLLECTION %}

            <div class="col m-2 shadow border border-2 border-warning rounded-2 p-0 trombi-item {{ trombi.role | lower }} {{ trombi.fonction | lower }}"
                 style="min-width:250px; max-width: 350px;">
                <div class="bg-warning text-center m-0 py-1" style="height:40px;">
                    <p class="fw-bold fs-5 m-0 p-0 text-uppercase">
                        {{ trombi.fonction }}
                    </p>
                </div>

                <div class="text-center py-3 m-0 bg-light" style="height:200px;">
                    <img src="{{ SITEURL }}/trombi/{{ trombi.photo }}"
                         alt="Photo de {{ trombi.prenom }} {{ trombi.nom }}"
                         class="rounded-circle border border-2" style="max-height: 180px; max-width:150px;">
                </div>

                <div class="bg-warning text-center m-0 p-1 py-2" style="height:40px;">
                    <p class="fw-bold m-0 p-0 text-dark-emphasis">
                        {{ trombi.prenom }} {{ trombi.nom }}
                    </p>
                </div>
            
                <div class="bg-body-secondary ms-0 me-0 p-2 border-top border-2" style="height:250px; overflow: hidden;">                    
                    <p class="h5 fw-bold">Service :</p>
                    <ul class="small">
                        <li>
                            <b>Date d'entrée :</b> {{ trombi.entree }}
                        </li>                        
                        {% if trombi.sortie %}
                            <li>
                                <b>Date sortie :</b> {{ trombi.sortie }}
                            </li>
                        {% endif %}                            
                        
                        <!-- <li><b>Section :</b> BTS CPI</li> -->
                        <li>
                            <b>Rôle(s) :</b> {{ trombi.role }}
                        </li>
                    </ul>

                    <div class="small">
                        <p class="fw-bold mb-1">Biographie :</p>
                        <p>
                            <em>"{{ trombi.bio }}"</em>
                        </p>
                    </div>
                    
                </div>

                <div class="bg-dark-subtle text-center m-0 p-1 fs-5" style="min-height:2em;">                    
                    <ul class="list-inline m-0 p-0">
                        {% if trombi.instagram %}
                            <li class="list-inline-item"><a href="{{ trombi.instagram }}" target="_blank" title="Voir son Instagram"><i class="bi bi-instagram"></i></a></li>
                        {% endif %}
                        {% if trombi.facebook %}
                            <li class="list-inline-item"><a href="{{ trombi.facebook }}" target="_blank" title="Voir son Facebook"><i class="bi bi-facebook"></i></a></li>
                        {% endif %}
                        {% if trombi.linked_in %}
                            <li class="list-inline-item"><a href="{{ trombi.linked_in }}" target="_blank" title="Voir son LinkedIn"><i class="bi bi-linkedin"></i></a></li>
                        {% endif %}
                    </ul>
                </div>   
            </div>
        {% endfor %}
    </div>


    <!-- SCRIPT POUR LA GESTION DES COMMANDES DE FILTRES : -->
    <script>
        // Filtre d'affichage des étudiants :
        document.addEventListener('DOMContentLoaded', function() {
            var toggleStudent = document.getElementById('toggleStudent');
            var toggleDriver = document.getElementById('toggleDriver');
            var toggleManager = document.getElementById('toggleManager');
            var toggleMember = document.getElementById('toggleMember');

            // Action du toggle étudiants :
            toggleStudent.addEventListener('change', function() {
                var students = document.querySelectorAll('.étudiant');
                students.forEach(function(student) {
                    if (student.style.display === 'none') {
                        student.style.display = 'block';
                    } else {
                        student.style.display = 'none';
                    }
                });

                // Activation & désactivation des toggles de sélection des pilotes, manager et équipiers
                if (toggleStudent.checked) {
                    toggleDriver.disabled = toggleManager.disabled = toggleMember.disabled = false;
                    toggleDriver.checked = toggleManager.checked = toggleMember.checked = true;
                } else {
                    toggleDriver.disabled = toggleManager.disabled = toggleMember.disabled = true;
                    toggleDriver.checked = toggleManager.checked = toggleMember.checked = false;
                }
            });

            // Actions du toggle pilote :
            toggleDriver.addEventListener('change', function() {
                var drivers = document.querySelectorAll('.pilote');
                drivers.forEach(function(driver) {
                    if (driver.style.display === 'none') {
                        driver.style.display = 'block';
                    } else {
                        driver.style.display = 'none';
                    }
                });
            });

            // Actions du toggle manager :
            toggleManager.addEventListener('change', function() {
                var managers = document.querySelectorAll('.manager');
                managers.forEach(function(manager) {
                    if (manager.style.display === 'none') {
                        manager.style.display = 'block';
                    } else {
                        manager.style.display = 'none';
                    }
                });
            });

            // Actions du toggle équipier :
            toggleMember.addEventListener('change', function() {
                var members = document.querySelectorAll('.équipier');
                members.forEach(function(member) {
                    if (member.style.display === 'none') {
                        member.style.display = 'block';
                    } else {
                        member.style.display = 'none';
                    }
                });
            });
        });

        // Filtre d'affichage des encadrants :
        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('toggleTeacher').addEventListener('change', function() {
                var teachers = document.querySelectorAll('.encadrant');
                teachers.forEach(function(teacher) {
                    if (teacher.style.display === 'none') {
                        teacher.style.display = 'block';
                    } else {
                        teacher.style.display = 'none';
                    }
                });
            });
        });


    </script>
{% endblock %}


<!-- NAVBAR DE PIED : -->
{% block bottom_nav_bar %}

    <nav class="container text-center p-0">
        <div class="row">
            <a class="col-6 btn btn-dark text-warning fs-3"
            title="Retour à l'accueil"
            href="{{ SITEURL }}">
                <i class="bi bi-house-up"></i>
            </a>
            <a class="col-6 btn btn-dark text-warning fs-3"
            title="Retour haut de page"
            href="#">
                <i class="bi bi-chevron-bar-up"></i>
            </a>
        </div>

    </nav>

{% endblock %}
